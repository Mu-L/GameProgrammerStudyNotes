## **第 1 章　适用于 MOBA 游戏的帧同步移动预表现方案**

### 本章解决的问题

- 弱网环境下，移动操作延迟导致手感差
- 传统帧同步很难做移动预测（因逻辑决定性 + 移动与技能强耦合）

### 核心思想

- **逻辑与表现分离**：逻辑位置只由帧命令驱动，表现进行预测插值
- **仅预测表现，不动逻辑** → 无需回滚，成本极低

### 技术要点

1. **表现层预表现流程**
   - 操作产生 → 同步给服务器
   - 同时驱动表现层即时展示移动 → 消除延迟
2. **与技能/攻击衔接问题处理**
   - 响应技能逻辑信号停止预移动
   - 技能位移覆盖平滑过渡
   - 移动→技能/技能→移动的动画与朝向一致性
3. **墙体/阻挡兼容**
   - 预测移动需与碰撞系统解耦
   - 逻辑返回时根据偏差做柔性回拉或插值纠正
4. **修正机制**
   - 判断偏差阈值
   - 轻微用插值拉回，严重直接 snap 回逻辑位置

### 本章贡献

在帧同步体系下，实现了**低成本、稳定、与技能/阻挡兼容的移动预测系统**，核心价值是“弱网可玩性”和“连招手感保持不崩”

------

## **第 2 章　基于网格的视野技术方案**

### 背景问题

MOBA/RTS 需要视野 Fog of War，传统方式（射线/多边形裁剪）计算量大

### 架构设计

- **离线阶段**：预分块 + 生成可见性网格数据
- **运行时阶段**：按玩家位置/朝向快速查表
- **渲染阶段**：将可见/不可见区域绘制为迷雾

### 核心技术点

1. **离线网格化 + 区域 ID 划分**
    提升运行时 O(1) 查询效率
2. **运行时动态遮挡**
   - 玩家/建筑/雾区实时合成
   - 支持动态阻挡变更（例如建筑被摧毁）
3. **迷雾渲染策略**
   - 使用 alpha mask 或屏幕后处理
   - 边缘做模糊/过渡处理避免生硬块
4. **性能优化**
   - 网格精度与内存 tradeoff
   - 压缩/稀疏表存储
   - SIMD/批量计算优化

### 本章贡献

把“复杂实时视野”转化为“可表驱动的离线/运行时分治体系”，兼顾性能与表现。

------

## **第 3 章　移动 App 集成 UE 的实践（以手机 QQ 为案例）**

### 本章动机

将 UE 作为模块嵌入非游戏 App（如 QQ 内嵌 3D 互动场景/装扮/小游戏）

### 技术难点

- UE 生命周期与 App 生命周期不一致
- 包体/内存/启动时长约束极严
- 必须 SDK 化可控

### 核心实现

1. **UE 启动器改造为 SDK**
   - 拆解入口 / 控制权下放 / 提供动态加载能力
2. **生命周期改造**
   - 支持 App Suspend/Resume/后台切换
   - 节电/降资源占用策略
3. **极致裁剪**
   - 代码 strip（裁剪模块/移除编辑器体积）
   - 资源按需加载 + CDN + 熔断
   - 内存按场景级回收/共享
4. **业务示例**
   - QQ 秀 3D 化
   - App 内打开小游戏不需退出 App
   - 聊天表情可直接录制 3D 镜头

### 本章贡献

提供了一个“UE from Game Engine → Embedded Runtime SDK”的可行全流程，意义在于 —— **引擎进入消费级 App 的工程化落地方式**。

## **第 4 章　UE Dedicated Server（DS）优化实践**

### 核心问题

UE 默认为客户端游戏场景设计，直接拿来做 DS 会：

- 启动慢 / 内存高 / Tick 重 / 帧低效
- 承载能力不足，成本极高

### 技术重点

**1）DS 管理优化**

- 引入 SeedDS 模式 —— 将 DS 作为母体，在接收新游戏时 fork/world clone，提升创建效率
- MultiWorld 模式 —— 一个进程承载多个世界，摊薄资源成本

**2）Tick 体系优化**

- 引擎层 Tick 精简（剔除渲染/输入/物理等无用模块）
- 逻辑层 Tick 限制调用频率/分派时序，避免全帧竞争
- 统一 Tick Pipeline 减少抖动

**3）网络层优化**

- 构建 DirtySystem：仅同步变化数据，减少冗余广播
- 建立网络相关性过滤：只发给需要的玩家，做“可见性/关联系统”裁切

**4）业务层优化**

- 动画逻辑剥离（DS 不需执行骨骼/Blend）
- OverlapEvents 事件高开销 → 改为自定义轻量 AABB/SO

### 本章贡献

将 UE 从“渲染型引擎”改造成“可规模化运行的服务器框架”，指导意义极强。

------

## **第 5 章　TcaplusDB 存储引擎深度剖析**

### 目标

支撑千万并发游戏业务的高性能一致性存储

### 核心技术点

1）**LSH（Log Structured Hash）存储架构**

- 样本分桶 + 自适应动态 rehash + 并发友好

2）**实时自适应机制**

- 热点重分布
- 写入合并、整理压缩增量进行

3）**线程模型与动态负载均衡**

- I/O/计算线程分离
- 元数据驱动的动态迁移

### 本章贡献

为读者清晰拆解了“大规模在线游戏数据库如何支撑实战场景”的底层工程原理。

------

## **第 6 章　面向游戏的服务网格：Tbuspp2**

### 出发点

微服务 mesh 在 Web 领域成熟，但游戏后端**天然不同**：

- 有状态 / 低延迟 / 并发突发 / 会话粘性极强

### 核心设计亮点

1）**信令与数据双信道** —— 低延迟高可靠
 2）**双队列模型** —— 将逻辑消息与系统消息分离
 3）**按需路由同步** —— 不全局一致，只做局部相关一致
 4）**Stateful Group 治理** —— 服务实例具备“状态域”管理能力

### 本章贡献

把 service mesh 从 Web 逻辑迁移到游戏需求，提供了“能用”的工程落地方式。

------

## **第 7 章　混合语言程序的混合调用栈火焰图**

### 要解决的问题

游戏中大量 C++ + Lua/Python/C# 混合调用
 → 性能热点无法准确归因（只看 C++ 或只看脚本都不完整）

### 核心实现点

1）**跨进程原生调用栈采集优化**（Linux/Win 各自策略）
 2）**脚本虚拟机栈回溯建模**（模拟调用树）
 3）**两者合并为统一混合火焰图**
 4）**统计编码压缩与在线监控**

### 本章价值

提供了真实生产级“跨语言性能诊断”的可复用范式。

------

## **第 8 章　出海游戏的 LQA 工业化**

### 问题背景

本地化不是“翻译 UI 文本”，而是**版本级工业流程**

### 工业化管线构成

1）提取阶段 — 自动挖掘翻译源
 2）翻译阶段 — 支持术语库/多语言流水
 3）合入阶段 — 资产合成与冲突规避
 4）测试阶段 — 自动 LQA 回归检查
 5）大版本合并 — 面对 live game 的长线迭代能力

### 本章贡献

把 LQA 从“任务”提升为“生产流水线”，引导开发将其视作长期基础设施。

## **第 9 章　可微渲染在 TPS 游戏资源转换与优化中的应用**

### 核心问题

传统资源制作流程（模型/材质/光照）→ 人力+迭代成本极高
 可微渲染（Differentiable Rendering）把 “视觉误差” 当作优化目标，直接驱动资源自动调整。

### 关键实现点

1）**反向优化思路**

- 输入：真实拍摄图 / 电影级资源
- 输出：低成本可实时资源
- 用误差反传优化材质参数、几何、甚至骨骼权重

2）**几何拟合**

- 通过 differentiable path tracing 拟合低多边形网格
- 可约束法线/体积保持

3）**材质拟合**

- 参数化 BRDF（粗糙度/金属度/SDF）
- 网络或优化器直接逼近真实光照响应

4）**性能利益**

- 显著减少美术手工适配
- 自动化一致性保障（统一视觉风格）

### 本章贡献

把“AI+渲染”结合用于真生产管线，而不是论文侧的概念性演示。

------

## **第 10 章　DXC 在 UE4 移动平台的落地实践**

### 背景

统一 Shader 跨平台编译是移动 AAA 最大痛点之一。
 DXC (DirectX Shader Compiler) 提供更现代编译前端，但 UE4 默认不走它。

### 重点内容

1）**将 HLSL 作为唯一源**

- 不再为 Metal/GLES 单独维护 Shader 代码
- 编译统一入口 → DXC → 各后端 (SPIR-V / MSL)

2）**移动平台适配难点**

- iOS Metal 编译链要求严格
- GLES/Vulkan 后端 bug 与特性差异
- Shader Model 降级与功能裁剪

3）**质量保障**

- 统一 IR 使得 CI 编译稳定、差异可控
- 内置一致性验证和跨平台回归

### 本章价值

解决的是“**Shader 资产全平台一致性与回归成本**”这个长期痛点，而非性能点状优化。

------

## **第 11 章　大场景静态光照烘焙质量提升方案**

### 核心问题

超大场景/复杂材质/多光源 → 噪点严重 + 接缝明显 + 时间超长

### 关键改进点

1）**改进采样策略**

- 分区引导采样（光源/材质/结构分区）
- 自引导 PathReuse 提升有效率

2）**动静分层求解**

- 静态区高精烘焙 + 动态区实时/混合
- 资源合理分配提升整体画质效率比

3）**大规模降噪**

- 多阶段联合降噪（预滤 / MLT / 再降噪）
- 视觉权重引导而非盲降噪

### 直接收益

- 减少计算时间 + 提升画质稳定性
- 产出可用于 AAA 水准大场景

------

## **第 12 章　光照接缝的 GPU 修复技术**

### 问题

不同 UV 块/Tile 烘焙出来的光照纹理之间存在亮度/边缘不连续
 —— 在 PBR/高精下尤其灾难性

### 核心思路

> **不是重新烘焙，而是在 GPU 上实时接缝修补**

### 技术要点

1）**接缝检测**

- 基于 UV/几何关系重建边界点
- 获取两侧 texel 差异

2）**补偿策略**

- Gradient-domain 修复
- Poisson 融合 / 多尺度平滑
- 边界过渡权重动态计算

3）**GPU 实时执行**

- Compute Shader 全并行修补
- 可作为烘焙后处理流程插入
- 结果写回 lightmap

### 本章价值

提供了“不动离线流程，只修结果”的工业级补救方案 —— 高性价比，高可迁移性。

## **第 13 章　面向移动平台的可变分辨率着色 (VRS) 技术**

### 要解决的问题

移动端算力有限，但希望在复杂场景中保障帧率与画质的平衡。

### 核心思想

> 不对整帧统一渲染质量，而是“按区域”动态分配渲染精度

### 关键技术点

1）**VRS 应用粒度**

- Per-draw：对整物体统一降低分辨率
- Per-triangle：根据材质/重要性区分
- Per-region（最常用）：对屏幕不同区域动态设定 shading rate

2）**分区策略**

- 中央区域/焦点区高分辨率
- 运动模糊区域/暗部/边缘区降低着色率

3）**收益与代价**

- 显著节省 fragment shading 成本
- 视觉感知损失极低（人眼非均值敏感）

### 本章贡献

提供了一套面向移动 AAA 落地的 “感知驱动型像素分配” 方法，是画质/性能统筹的关键一环。

------

## **第 14 章　基于帧预测的高帧率渲染方案**

### 背景

移动端真实渲染 90/120FPS 成本极高，但用户主观希望“看起来高帧”。

### 核心结论

> 不用“算出”所有帧，而是“预测/补出”中间帧

### 技术实现

1）**Motion-based Frame Interpolation**

- 根据前几帧的 motion vectors 做时间插值
- 生成“预测帧”插在真实渲染帧之间

2）**预测误差处理**

- 碰撞/技能爆发时禁用预测帧
- 引入“不会在关键视觉事件期间补帧”的自适应机制

3）**最终效果**

- GPU 实际渲染仅 1/N 帧 → 极大降低算力压力
- 视觉连续性接近原生高帧

### 本章价值

用“视觉工程”替代“蛮力渲染”，这种工程化 tradeoff 是移动平台必选方向。

------

## **第 15 章　PBR 环境下的开放世界地形渲染策略**

### 核心挑战

开放世界 = 超大面积 + 复杂材质 + 长视距 + 高帧率
 传统逐像素/逐物体渲染无法满足实时性

### 关键技术点

1）**GPU 驱动渲染路径**

- GPU 负责 Cull/LOD/Draw，CPU 减负
- 可大幅提升大场景对象提交效率

2）**Hybrid Shading 策略**

- 重要区域全面 PBR
- 背景/远景使用简化合成或烘焙

3）**MaterialID + Tile 化**

- 地形合成不在 run-time 混合材质层，而采用预处理 ID 编码
- 渲染时按 Tag 提取 Shader 路径快速执行

4）**分辨率与距离分层**

- Near：全分辨率 PBR + 动态反射
- Mid：简化 BRDF + 混合缓存
- Far：贴图烘焙 + Imposter 模型

### 本章贡献

构建了“可扩展”的开放世界实时渲染标准结构，是工业项目必须掌握的基础架构。

------

## **第 16 章　极端天气渲染的整体解决方案**

### 场景意义

极端天气 = 戏剧性画面表现（风暴、飓风、暴雪、沙尘）→ 但成本极易爆炸（体积/粒子/光照/交互）

### 核心实现框架

1）**Weather System 作为独立级别 Runtime**

- 不是“特效”，是一级系统（含逻辑+渲染+交互）

2）**体积渲染层**

- 使用体积纹理/稀疏 voxel grid
- 通过 MIP/LOD 逐级降低开销

3）**光照与散射**

- 单次散射近似 + 屏幕空间合成（非路径追踪）
- 利用 precomputed LUT 替代实时多次散射

4）**与游戏交互**

- 风影响角色/植被/特效轨迹
- 视野与 UI 叠加动态模糊/积雪/水滴

### 本章价值

把天气渲染从“华丽效果”提升到“系统级渲染策略”，兼顾玩法与性能。

## **第 17 章　移动端贴图压缩格式 ZTC 的设计与优化**

### 背景问题

ETC/ASTC 等移动压缩格式虽然标准化，但存在：

- 某些纹理（如法线/低频渐变/文本 UI）失真明显
- 不同芯片实现表现不一致
- 离线压缩代价巨大 & 难以全局调参

### 核心方案：ZTC（自研纹理压缩管线）

#### 关键技术点

1）**基于内容分类优化**

- 按纹理类型自动选择压缩策略（法线/漫反射/GUI 单独优化）
- 非“一刀切” ASTC 码本

2）**PCA + Block clustering**

- 对纹理 block 聚类，减少码本误差
- 约束失真方向（如法线 z 精度优先）

3）**混合优化目标**

- 不追求最低失真均方误差（MSE），而是感知质量优化（PSNR+SSIM+HSV 加权）

### 价值

在极低存储成本下，获得显著的视觉质量提升，适合大项目统一资源管线使用。

------

## **第 18 章　显存管理系统的设计与最佳实践**

### 背景

移动GPU显存极为紧张，且存在运行期碎片化/峰值瞬时爆发问题

### 核心思想

> 显存不是“申请-释放”这么简单，而要“规划-调度-回收”成体系

#### 重点机制

1）**分级池化**

- 纹理/网格/RT/Buffer 按类型分池
- 避免 malloc/free 造成碎片

2）**生命周期驱动**

- 资源按场景/关卡/阶段绑定生命周期
- 离场景自动进入 Reclaim 队列等待回收

3）**压缩与级联**

- MIP/RT/Shadow 等资源动态降级
- 内存紧张时自动换低配资源

4）**GPU 驱动显存跟踪**

- 实时采集真实使用情况，与预算比较
- 控制“显存压力阈值”触发回收

### 本章贡献

从“资源申请”转为“资源治理”，解决大项目运行期 OOM 和卡顿问题。

------

## **第 19 章　基于 Vulkan Ray Query 的实时反射实现**

### 目标背景

希望在移动端实现高质量反射，但完整 RT Pipeline 成本过高。

### 核心策略

> 用 Ray Query 替代完整 Ray Tracing Pipeline —— “可选择性追踪”

#### 技术精髓

1）**与可见性缓冲集成**

- 先用 GBuffer 取得 hit 信息
- 仅对“不可信区域”发射 RayQuery

2）**限定射线预算**

- Ray per pixel 非恒定值，按场景重要性调整
- 控制 RT 对整帧预算影响在可控范围

3）**混合反射**

- SSR（屏幕空间反射） + RayQuery 融合
- SSR 可解区域优先用 SSR，用 RayQuery 补齐

### 最终效果

接近完整反射质量，成本可控，真正能在移动平台量产。

------

## **第 20 章　移动端全局光照（GI）技术演进与未来方向**

### 历史演进脉络

1）纯烘焙 GI → 无动态
 2）混合 GI（直射实时 + 间接烘焙）
 3）半动态 GI（cache + probe 更新）
 4）动态 GI（Sparse Voxel / SDF / Irradiance Field）
 5）SmartGI（混合调度 + 内容关注）

### SmartGI 核心特征（腾讯方案）

1）**动态性与成本分区**

- 角色附近: 全动态
- 环境大部分: 缓存/Probe 混合
- 偏远区域: 烘焙静态

2）**场景变化感知**

- 只对“光学变化”区域更新
- 非盲更新，极大削减算力

3）**与渲染链路深度融合**

- GI 与 AO/Reflection/Shadow 分层协同
- 一致的感知与管线调度

### 本章价值

从“单点 GI 技术”上升到“**全项目级别 GI 策略架构**”
 属于工程抽象层提升，而非某一算法点补充。

## **第 21 章　面向大规模项目的动作匹配与神经动画生成**

### 背景痛点

传统动画系统存在：

- 依赖大量关键帧资产（生产成本高）
- 组合能力弱（走路→滑步→转身→攻击容易“断”）
- 人工 Fine-tune 成本巨大

### 核心技术框架（腾讯方案）

1）**动作匹配（Motion Matching, MM）**

- 输入：当前状态(位置/速度/期望方向等)
- 从大库中检索最匹配动画片段
- 无需显式状态机即可平滑过渡

2）**神经动画（PNN / 网络辅助预测）**

- 用神经网络替代最后一跳过渡预测
- 实时预测 Blend / 脚步落地校正 / root motion

3）**多风格/多角色统一控制**

- 风格编码（Style Embedding）
- 同一数据驱动不同角色骨架/体型

4）**工程上的可控性**

- 仍留有开发者可调参数（非纯黑盒）
- 与引擎物理/碰撞/挂点系统全量融合

### 本章价值

将动画从“资产驱动”升级为“数据+预测协同驱动”，是 AIGC 游戏动画生产线的中枢变革。

------

## **第 22 章　高逼真人像的 Light Stage 数字化生产管线**

### 背景意义

影视级数字人需要：

- 极高几何/材质精度
- 面部结构 & 动态捕捉高还原
   作为游戏、社交、虚拟人基础资产

### 全流程技术要点

1）**多光场采集（Light Stage）**

- 多视角 + 多光照条件同步捕获
- 为 BRDF/结构重建提供多维信息

2）**几何与 PBR 参数反演**

- 几何：深度融合/MVS + 正交重建
- 材质：把捕获图像解算成 Diffuse/Specular/Normal/SSS

3）**高保真数字资产生成**

- Hair/Fuzz/皮肤微结构单独建模
- UE Substrate/MetaHuman 体系接入

4）**适配实时渲染**

- 高低模切换 / MIP 策略 / 混合阴影
- LOD 体系与平台差异处理

### 本章价值

把“电影级素材”工业化接入“实时引擎”中的方法明确化，是未来数字人生产标准。

------

## **第 23 章　基于语音的面部动画驱动（Speech-driven Facial Animation）**

### 核心目标

输入语音 → 输出与语义/情绪一致的稳定面部表情与口型
 用于表演、虚拟主播、社交互动等场景

### 技术核心

1）**音素识别 → 视素映射（Phoneme → Viseme）**

- 解决“说什么”对应“嘴型怎么动”

2）**协同发音规则建模**

- 不是逐帧映射，而是基于发音过渡建规则
- 避免嘴型“跳格”“机械性”

3）**情感增强与全脸联动**

- **Prosody（语调）驱动情绪解码**
- 面部主表情 → 骨骼/Blendshape 全域影响
- 支持“愤怒版/悲伤版/讽刺版同一句音频”

4）**与身体/摄像/生成系统融合**

- Facial只是子系统，需与动作/镜头统一调度

### 本章价值

实现了“语音 → 情绪 → 全脸表演”的自动化管线，是 AI 驱动内容时代的关键能力。
